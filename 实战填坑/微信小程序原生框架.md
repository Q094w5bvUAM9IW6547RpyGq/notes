## 父子组件通信

### 微信小程序之addGlobalClass属性

[参考文章](https://juejin.cn/post/6916897300295974926)

```
// 基础写法：组件js options配置
Component({
  options: {
    styleIsolation: 'apply-shared'
  }
})

// 等价写法:
Component({
  options: {
    addGlobalClass: true
  }
})
```

## 数据存储

### 缓存

```
wx.setStorageSync('cart', cart); //存入缓存
let cart = wx.getStorageSync('cart') || []; //从缓存中获取数据
```

### 全局数据

```
App()
注册一个小程序
小程序的入口方法
//app.js
App({
  onLaunch: function(options) {
    console.log("onLaunch");
  },
  onShow: function(options) {
      console.log("onShow");
      // Do something when show.
  },
  onHide: function() {
      console.log("onHide");
      // Do something when hide.
  },
  onError: function(msg) {
      console.log(msg)
  },
  test:function() {
    console.log("I am func from App.js");
  },
  globalData: {
    userInfo:null,
    helloFromApp:'Hello,I am From App.js'
  }
```

```

let app = getApp() //获取整个app
conosle.log(app.globalData.helloFromApp) // Hello,I am From App.js
```

## [云开发](https://developers.weixin.qq.com/miniprogram/dev/wxcloud/basis/getting-started.html)

### 小程序端初始化

> 调用云函数、数据库、存储、云托管等 API 时，都需要指定所需访问的云环境 ID，意即指定访问哪个环境下的云函数/数据库/存储/云托管/...资源。有两种方式进行指定：
>
> 1. 使用默认实例 `wx.cloud`：在使用默认实例调用 API 时，各个 API 都支持传入 env 用于指定所需访问的云环境 ID，如果 API 中不传，则使用 `wx.cloud.init` 时传入的 env。
> 2. 为各个环境使用单独的实例：使用 `new wx.cloud.Cloud` API 为新建一个专用于访问某个环境的实例，在该实例上进行的 API 调用都只会访问该环境。

| 实例                                                         | API                                                          |
| :----------------------------------------------------------- | :----------------------------------------------------------- |
| wx.cloud 默认实例                                            | wx.cloud.callFunction wx.cloud.callContainer wx.cloud.database ... 访问API参数中指定的环境或wx.cloud.init指定的默认环境 |
| a = new wx.cloud.Cloud({  resourceEnv: 'a' }) 仅用于访问环境 a 的实例 | a.callFunction a.callContainer a ... 访问 a 环境的云资源     |
| b = new wx.cloud.Cloud({  resourceEnv: 'b' }) 仅用于访问环境 b 的实例 | b.callFunction b.callContainer a ... 访问 b 环境的云资源     |

### 



